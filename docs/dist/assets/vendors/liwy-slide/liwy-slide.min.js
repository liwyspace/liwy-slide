/*! liwy-slide - v1.0.0 - 2017-08-25
* https://github.com/liwyspace/liwy-slide#readme
* Copyright (c) 2017 liwy; Licensed MIT */

!function(t,i,o,s){var e=function(i,o){this.$element=t(i),this.options=t.extend({},e.defaults,o),this.init()};e.defaults={wrapperClass:"liwy-wrapper",mode:"horizontal",slideSelector:"",startSlide:0,randomStart:!1,captions:!0,infiniteLoop:!0,controls:!0,nextText:"Next",prevText:"Prev",nextSelector:null,prevSelector:null,autoControls:!0,startText:"Start",stopText:"Stop",autoControlsCombine:!0,autoControlsSelector:null,pager:!0,pagerSelector:null,buildPager:null,pagerCustom:null,auto:!0,autoStart:!1,pause:2e3,autoDirection:"next"},e.prototype.init=function(){this.children=this.$element.children(this.options.slideSelector),this.options.randomStart&&(this.options.startSlide=Math.floor(Math.random()*this.children.length)),this.active={index:this.options.startSlide},this.animProp="vertical"===this.options.mode?"top":"left",this.working=!1,this.controls={},this.interval=null,this.setup()},e.prototype.setup=function(){this.$element.wrap('<div class="'+this.options.wrapperClass+'"><div class="liwy-viewport"></div></div>'),this.viewport=this.$element.parent(),this.loader=t('<div class="liwy-loading" />'),this.viewport.prepend(this.loader);this.viewport.parent().css({maxWidth:"100%"}),this.viewport.css({width:"100%",overflow:"hidden",position:"relative"}),this.$element.css({width:"horizontal"===this.options.mode?1e3*this.children.length+"%":"auto",position:"relative"}),this.children.css({float:"horizontal"===this.options.mode?"left":"none",listStyle:"none",position:"relative"});var i=this.viewport.width();this.children.css("width",i),this.options.captions&&this.children.each(function(i){var o=t(this).find("img:first").attr("title");void 0!==o&&(""+o).length&&t(this).append('<div class="liwy-caption"><span>'+o+"</span></div>")}),this.controls.element=t('<div class="liwy-controls" />'),this.options.controls&&(this.controls.next=t('<a class="liwy-next" href="">'+this.options.nextText+"</a>"),this.controls.prev=t('<a class="liwy-prev" href="">'+this.options.prevText+"</a>"),this.controls.next.bind("click touchend",t.proxy(function(t){t.preventDefault(),this.controls.element.hasClass("disabled")||this.goToNextSlide()},this)),this.controls.prev.bind("click touchend",t.proxy(function(t){t.preventDefault(),this.controls.element.hasClass("disabled")||this.goToPrevSlide()},this)),this.options.nextSelector&&t(this.options.nextSelector).append(this.controls.next),this.options.prevSelector&&t(this.options.prevSelector).append(this.controls.prev),this.options.nextSelector||this.options.prevSelector||(this.controls.directionEl=t('<div class="liwy-controls-direction" />'),this.controls.directionEl.append(this.controls.prev).append(this.controls.next),this.controls.element.addClass("liwy-has-controls-direction").append(this.controls.directionEl))),this.options.auto&&this.options.autoControls&&(this.controls.start=t('<div class="liwy-controls-auto-item"><a class="liwy-start" href="">'+this.options.startText+"</a></div>"),this.controls.stop=t('<div class="liwy-controls-auto-item"><a class="liwy-stop" href="">'+this.options.stopText+"</a></div>"),this.controls.autoEl=t('<div class="liwy-controls-auto" />'),this.controls.autoEl.on("click",".liwy-start",t.proxy(function(t){this.startAuto(),t.preventDefault()},this)),this.controls.autoEl.on("click",".liwy-stop",t.proxy(function(t){this.stopAuto(),t.preventDefault()},this)),this.options.autoControlsCombine?this.controls.autoEl.append(this.controls.start):this.controls.autoEl.append(this.controls.start).append(this.controls.stop),this.options.autoControlsSelector?t(this.options.autoControlsSelector).html(this.controls.autoEl):this.controls.element.addClass("liwy-has-controls-auto").append(this.controls.autoEl),this.updateAutoControls(this.options.autoStart?"stop":"start")),this.options.pager&&(this.options.pagerCustom?this.pagerEl=t(this.options.pagerCustom):(this.pagerEl=t('<div class="liwy-pager" />'),this.options.pagerSelector?t(this.options.pagerSelector).html(this.pagerEl):this.controls.element.addClass("liwy-has-pager").append(this.pagerEl),this.populatePager()),this.pagerEl.on("click touchend","a",t.proxy(function(i){var o,s;i.preventDefault(),this.controls.element.hasClass("disabled")||void 0!==(o=t(i.currentTarget)).attr("data-slide-index")&&(s=parseInt(o.attr("data-slide-index")))!==this.active.index&&this.goToSlide(s)},this))),(this.options.controls||this.options.autoControls||this.options.pager)&&this.viewport.after(this.controls.element),this.start()},e.prototype.start=function(){if(this.options.infiniteLoop&&"fade"!==this.options.mode){var t=this.children.slice(0,1).clone(!0).addClass("liwy-clone"),i=this.children.slice(-1).clone(!0).addClass("liwy-clone");this.$element.append(t).prepend(i)}this.loader.remove();var o=this.children.eq(this.active.index*this.getMoveNumber()).position();this.active.index===this.getPagerNumber()-1&&(this.active.last=!0),void 0!==o&&("horizontal"===this.options.mode?this.transitionAnimate(-o.left,"reset",0):"vertical"===this.options.mode&&this.transitionAnimate(-o.top,"reset",0)),this.options.pager&&this.updatePagerActive(this.options.startSlide),this.options.controls&&this.updateDirectionControls()},e.prototype.goToSlide=function(t,i){var o,s,e={left:0,top:0};this.oldIndex=this.active.index;var n=t;t<0?n=this.options.infiniteLoop?this.getPagerNumber()-1:this.active.index:t>=this.getPagerNumber()&&(n=this.options.infiniteLoop?0:this.active.index),this.active.index=n,this.active.last=this.active.index>=this.getPagerNumber()-1,this.working||this.active.index===this.oldIndex||(this.working=!0,(this.options.pager||this.options.pagerCustom)&&this.updatePagerActive(this.active.index),this.options.controls&&this.updateDirectionControls(),"next"===i&&0===this.active.index?(e=this.$element.find("> .liwy-clone").eq(1).position(),this.active.last=!1):t>=0&&(s=t*parseInt(this.getMoveNumber()),e=this.children.eq(s).position()),void 0!==e&&(o="horizontal"===this.options.mode?-e.left:-e.top,this.transitionAnimate(o,"slide",this.options.speed)),this.working=!1)},e.prototype.goToNextSlide=function(){if((this.options.infiniteLoop||!this.active.last)&&1!=this.working){var t=parseInt(this.active.index)+1;this.goToSlide(t,"next")}},e.prototype.goToPrevSlide=function(){if((this.options.infiniteLoop||0!==this.active.index)&&1!=this.working){var t=parseInt(this.active.index)-1;this.goToSlide(t,"prev")}},e.prototype.startAuto=function(i){this.interval||(this.interval=setInterval(t.proxy(function(){"next"===this.options.autoDirection?this.goToNextSlide():this.goToPrevSlide()},this),this.options.pause),this.options.autoControls&&!0!==i&&this.updateAutoControls("stop"))},e.prototype.stopAuto=function(t){this.interval&&(clearInterval(this.interval),this.interval=null,this.options.autoControls&&!0!==t&&this.updateAutoControls("start"))},e.prototype.getSlideShowNumber=function(){return 1},e.prototype.getMoveNumber=function(){return this.getSlideShowNumber()},e.prototype.getPagerNumber=function(){return Math.ceil(this.children.length/this.getSlideShowNumber())},e.prototype.populatePager=function(){for(var i="",o="",s=this.getPagerNumber(),e=0;e<s;e++)o="",this.options.buildPager&&t.isFunction(this.options.buildPager)||this.options.pagerCustom?(o=this.options.buildPager(e),this.pagerEl.addClass("liwy-custom-pager")):(o=e+1,this.pagerEl.addClass("liwy-default-pager")),i+='<div class="liwy-pager-item"><a href="" data-slide-index="'+e+'" class="liwy-pager-link">'+o+"</a></div>";this.pagerEl.html(i)},e.prototype.updatePagerActive=function(i){this.children.length;this.pagerEl.find("a").removeClass("active"),this.pagerEl.each(function(o,s){t(s).find("a").eq(i).addClass("active")})},e.prototype.updateDirectionControls=function(){1===this.getPagerNumber()?(this.controls.prev.addClass("disabled"),this.controls.next.addClass("disabled")):!this.options.infiniteLoop&&this.options.hideControlOnEnd&&(0===this.active.index?(this.controls.prev.addClass("disabled"),this.controls.next.removeClass("disabled")):this.active.index===this.getPagerNumber()-1?(this.controls.next.addClass("disabled"),this.controls.prev.removeClass("disabled")):(this.controls.prev.removeClass("disabled"),this.controls.next.removeClass("disabled")))},e.prototype.updateAutoControls=function(t){console.log(t),this.options.autoControlsCombine?this.controls.autoEl.html(this.controls[t]):(this.controls.autoEl.find("a").removeClass("active"),this.controls.autoEl.find("a:not(.liwy-"+t+")").addClass("active"))},e.prototype.transitionAnimate=function(i,o,s,e){var n;(n={})[this.animProp]=i,"slide"===o?this.$element.animate(n,s,this.options.easing,t.proxy(function(){this.transitionAnimateAfter()},this)):"reset"===o&&this.$element.css(this.animProp,i)},e.prototype.transitionAnimateAfter=function(){if(this.options.infiniteLoop){var t="";0===this.active.index?t=this.children.eq(0).position():this.active.index===this.children.length-1&&(t=this.children.eq(this.children.length-1).position()),t&&("horizontal"===this.options.mode?this.transitionAnimate(-t.left,"reset",0):"vertical"===this.options.mode&&this.transitionAnimate(-t.top,"reset",0))}this.working=!1},t.fn.liwySlide=function(i){return this.each(function(){var o=t(this),s=o.data("liwy.slide");s||(s=new e(this,"object"==typeof i&&i),o.data("liwy.slide",s))})}}(window.jQuery,window,document);